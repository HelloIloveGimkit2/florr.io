// ==UserScript==
// @name         florrehoh hackering
// @namespace    http://tampermonkey.net/
// @version      1.1
// @description  take over the florr.io better now!
// @author       m28 (so real)
// @match        https://florr.io/*
// @icon         data:image/gif;base64,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
// @grant        none
// @run-at       document-start
// @require      https://unpkg.com/string-similarity@4.0.4/umd/string-similarity.min.js
// @license      AGPL
// ==/UserScript==

// Minified code, 30+ KB -> 13 KB (30KB a lot trust)
var obj={rarity:0,id:1,aim:5,basicId:605463,find:{petal:"Basic",value:[5,0,0,0,0,0,0,0]},config:{top:!1,left:!1,x:"-20px",y:"-20px",scale:1,key:"Equal"},version:"1.2",versionHash:versionHash,autoFind:!0,multipleCounting:{enable:!1,petal:{"Common Basic":5,"Common Light":5},key:"Minus"}},petal="Common Basic",rarityArr=["Common","Unusual","Rare","Epic","Legendary","Mythic","Ultra","Super"],rarityColors=["#7EEF6D","#FFE65D","#4D52E3","#861FDE","#DE1F1F","#1FDBDE","#FF2B75","#2BFFA3"],petalArr=["Basic","Light","Rock","Square","Rose","Stinger","Iris","Wing","Missile","Grapes","Cactus","Faster","Bubble","Pollen","Dandelion","Beetle Egg","Antennae","Heavy","Yin Yang","Web","Honey","Leaf","Salt","Rice","Corn","Sand","Pincer","Yucca","Magnet","Yggdrasil","Starfish","Pearl","Lightning","Jelly","Claw","Shell","Cutter","Dahlia","Uranium","Sponge","Soil","Fangs","Third Eye","Peas","Stick","Clover","Powder","Air","Basil","Orange","Ant Egg","Poo","Relic","Lotus","Bulb","Cotton","Carrot","Bone","Plank","Tomato","Mark","Rubber","Blood Stinger","Bur","Root","Ankh","Dice","Talisman","Battery","Amulet","Compass","Disc","Shovel","Coin","Chip","Card","Moon","Privet","Glass"];function getNewPetal(e){var t={id:1,rarity:0,petal:""};if(!(e.split(" ").length<=0))return 1==e.split(" ").length?(e.startsWith("un")?t.rarity="Unusual":e.startsWith("r")?t.rarity="Rare":e.startsWith("e")?t.rarity="Epic":e.startsWith("l")?t.rarity="Legendary":e.startsWith("m")?t.rarity="Mythic":e.startsWith("u")?t.rarity="Ultra":e.startsWith("s")?t.rarity="Super":t.rarity="Common",t.id=stringSimilarity.findBestMatch(e.slice(1),petalArr),e=t.rarity+" "+t.id.bestMatch.target,t.rarity=rarityArr.indexOf(t.rarity)):(t.rarity=stringSimilarity.findBestMatch(e.split(" ").shift(),rarityArr),t.id=stringSimilarity.findBestMatch(e.split(" ").splice(1).join(" "),petalArr),e=t.rarity.bestMatch.target+" "+t.id.bestMatch.target,t.rarity=t.rarity.bestMatchIndex),t.id=t.id.bestMatchIndex+1,t.petal=e,t}var thisNewPetal=getNewPetal(petal);function findSequence(e,t){let i=0;for(let n=0;n<t.length;n++)if(t[n]===e[i]?i++:i=t[n]===e[0]?1:0,i===e.length)return n-i+1}function SmoothScroll(e,t,i){e===document&&(e=document.scrollingElement||document.documentElement||document.body.parentNode||document.body);var n=!1,o=e.scrollTop,r=e===document.body&&document.documentElement?document.documentElement:e;function a(i){i.preventDefault();var a=function(e){return e.detail?e.wheelDelta?e.wheelDelta/e.detail/40*(e.detail>0?1:-1):-e.detail/3:e.wheelDelta/120}(i);o+=-a*t,o=Math.max(0,Math.min(o,e.scrollHeight-r.clientHeight)),n||l()}function l(){n=!0;var t=(o-e.scrollTop)/i;e.scrollTop+=t,Math.abs(t)>.5?s(l):n=!1}e.addEventListener("mousewheel",a,{passive:!1}),e.addEventListener("DOMMouseScroll",a,{passive:!1});var s=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,20)}}if(obj.id=thisNewPetal.id,obj.rarity=thisNewPetal.rarity,petal=thisNewPetal.petal,null==localStorage.getItem("petalFarmingCounter"))localStorage.setItem("petalFarmingCounter",JSON.stringify(obj)),setTimeout((()=>{toggleCon(),conCon.scrollTo(0,110)}),5e3);else{var thisObj=JSON.parse(localStorage.getItem("petalFarmingCounter"));thisObj.version!=obj.version&&(thisObj.version=obj.version,setTimeout((()=>{toggleCon(),conCon.scrollTo(0,110)}),5e3)),thisObj.versionHash!=versionHash&&(thisObj.versionHash=versionHash,thisObj.autoFind&&setInterval((()=>{thisObj.basicId=findSequence(thisObj.find.value,unsafeWindow.Module.HEAPU32)-8*(stringSimilarity.findBestMatch(thisObj.find.petal,petalArr).bestMatchIndex+1)+8,document.getElementById("Capply").innerHTML=`Basic ID: ${coloringValue(thisObj.basicId)}`;var e=JSON.parse(localStorage.getItem("petalFarmingCounter"));e.basicId=thisObj.basicId,localStorage.setItem("petalFarmingCounter",JSON.stringify(e))}),1e4)),Object.keys(thisObj.multipleCounting.petal).length<2&&(thisObj.multipleCounting.petal=obj.multipleCounting.petal),Object.keys(obj).forEach((e=>{Object.keys(thisObj).includes(e)||(thisObj[e]=obj[e])})),obj=thisObj,localStorage.setItem("petalFarmingCounter",JSON.stringify(thisObj))}var thisPetalObj={};for(const[e,[t,i]]of Object.entries(Object.entries(obj.multipleCounting.petal)))thisPetalObj[e]={id:getNewPetal(t).id,rarity:getNewPetal(t).rarity,aim:i};var container=document.createElement("div");function toggleCon(){"hidden"==conCon.style.overflow?(container.style.height="300px",container.style.width="400px",conCon.style.overflow="hidden scroll",container.style.borderRadius="5px",barProgress.style.maxHeight="300px",barProgress.style.maxWidth="400px",barProgress.style.height="300px",barProgress.style.width="400px",barProgress.style.borderRadius="0px",barProgress.style.opacity=0,barProgress.style.background="#1FDBDE",barProgress.style.pointerEvents="none",barText.style.opacity=0,settings.style.pointerEvents="all",settings.style.opacity=1,changelog.style.pointerEvents="all",changelog.style.opacity=1):(container.style.height="24px",container.style.width="350px",conCon.style.overflow="hidden",container.style.borderRadius="24px",barProgress.style.maxHeight="24px",barProgress.style.maxWidth="350px",barProgress.style.height="24px",barProgress.style.width="350px",barProgress.style.borderRadius="24px",barProgress.style.opacity=1,barProgress.style.background="#F5FF65",barProgress.style.pointerEvents="all",barText.style.opacity=1,settings.style.pointerEvents="none",settings.style.opacity=0,changelog.style.pointerEvents="none",changelog.style.opacity=0,updateProgress(),updateMultiProgress())}container.id="container",container.style=`\n    padding: 5px;\n    height: 24px;\n    width: 350px;\n    position: absolute;\n    transform: translate(${obj.config.x}, ${obj.config.y}) scale(${obj.config.scale});\n    background: #333333;\n    border-radius: 24px;\n    transition: all 1s ease-in-out;\n    opacity: 1;\n    box-shadow: 5px 5px rgba(0, 0, 0, 0.3);\n    pointer-events: all;\n    cursor: pointer;\n    overflow: hidden;\n`,container.onclick=function(){toggleCon()},document.querySelector("body").appendChild(container);var conCon=document.createElement("div");function convertNumber(e){return Math.abs(Number(e))>=1e9?(Math.abs(Number(e))/1e9).toFixed(2)+"B":Math.abs(Number(e))>=1e6?(Math.abs(Number(e))/1e6).toFixed(2)+"M":Math.abs(Number(e))>=1e3?(Math.abs(Number(e))/1e3).toFixed(2)+"K":Math.abs(Number(e))}function containerPos(){obj.config.top?(container.style.top="0",container.style.bottom="unset"):(container.style.top="unset",container.style.bottom="0"),obj.config.left?(container.style.left="0",container.style.right="unset"):(container.style.left="unset",container.style.right="0"),container.style.transform=`translate(${obj.config.x}, ${obj.config.y}) scale(${obj.config.scale})`}function coloringBool(e){return e?`<a style="color: #2BFFA3">${e}</a>`:`<a style="color: #DB5A5A">${e}</a>`}function coloringValue(e){return`<a style="color: #DBD74B">${e}</a>`}function coloringFunction(e){return`<a style="color: #1FDBDE">${e}</a>`}function updateMultiProgress(){var e,t="";if(obj.multipleCounting.enable){for(const[i,[n,o]]of Object.entries(Object.entries(obj.multipleCounting.petal)))t+=`\n        <br>\n        <div style="margin-top: 5px">\n            <div style="text-align: left; float: left; position: relative; top: -15px;">${n}</div>\n            <div style="text-align: right; float: right; position: relative; top: -15px;">${convertNumber(e=unsafeWindow.Module.HEAPU32[obj.basicId+8*getNewPetal(n).id-(8-getNewPetal(n).rarity)])}/${convertNumber(o)}</div>\n        </div>\n        <div style="width: 99%;height: 7px;background: #222;border-radius: 5px;padding: 3px;margin: 2px 0 5px 0;">\n            <div style="width: ${e/o*100}%;max-width:100%;background: ${rarityColors[getNewPetal(n).rarity]};height: 100%;border-radius: 3px; transition: all 1s ease-in-out;"></div>\n        </div>\n    `;multiProgress.innerHTML=t}}conCon.style="\n    overflow: hidden;\n    height: 300px;\n",container.appendChild(conCon),new SmoothScroll(conCon,90,7),containerPos(),thisNewPetal=getNewPetal(petal=rarityArr[obj.rarity]+" "+petalArr[obj.id-1]),obj.id=thisNewPetal.id,obj.rarity=thisNewPetal.rarity,petal=thisNewPetal.petal,obj.aim=Math.abs(Math.floor(obj.aim)),obj.aim=0==obj.aim?1:obj.aim;var multiProgress=document.createElement("div");function multiProgressToggle(){multiProgress.style.right="20px"==multiProgress.style.right?"-290px":"20px"}multiProgress.style="\n    top: 20px;\n    right: -290px;\n    width: 250px;\n    height: auto;\n    max-height: 200px;\n    background: #333333;\n    position: absolute;\n    border-radius: 5px;\n    padding: 15px;\n    box-shadow: 5px 5px rgba(0, 0, 0, 0.3);\n    overflow: hidden scroll;\n    color: white;\n    font-family: 'Ubuntu';\n    transition: all 1s ease-in-out;\n    font-size: 12px;\n    text-shadow: rgb(0 0 0) 2px 0px 0px, rgb(0 0 0) 1.75517px 0.958851px 0px, rgb(0 0 0) 1.0806px 1.68294px 0px, rgb(0 0 0) 0.141474px 1.99499px 0px, rgb(0 0 0) -0.832294px 1.81859px 0px, rgb(0 0 0) -1.60229px 1.19694px 0px, rgb(0 0 0) -1.97998px 0.28224px 0px, rgb(0 0 0) -1.87291px -0.701566px 0px, rgb(0 0 0) -1.30729px -1.5136px 0px, rgb(0 0 0) -0.421592px -1.95506px 0px, rgb(0 0 0) 0.567324px -1.91785px 0px, rgb(0 0 0) 1.41734px -1.41108px 0px, rgb(0 0 0) 1.92034px -0.558831px 0px;\n",document.querySelector("body").appendChild(multiProgress),new SmoothScroll(multiProgress,90,7);var settings=document.createElement("div");settings.style="\n    padding: 10px;\n    color: white;\n    font-family: 'Ubuntu';\n    z-index: 1;\n    font-size: 12px;\n    line-height: 15px;\n    opacity: 0;\n    transition: all 1s ease-in-out;\n    pointer-events: none;\n    text-shadow: rgb(0 0 0) 2px 0px 0px, rgb(0 0 0) 1.75517px 0.958851px 0px, rgb(0 0 0) 1.0806px 1.68294px 0px, rgb(0 0 0) 0.141474px 1.99499px 0px, rgb(0 0 0) -0.832294px 1.81859px 0px, rgb(0 0 0) -1.60229px 1.19694px 0px, rgb(0 0 0) -1.97998px 0.28224px 0px, rgb(0 0 0) -1.87291px -0.701566px 0px, rgb(0 0 0) -1.30729px -1.5136px 0px, rgb(0 0 0) -0.421592px -1.95506px 0px, rgb(0 0 0) 0.567324px -1.91785px 0px, rgb(0 0 0) 1.41734px -1.41108px 0px, rgb(0 0 0) 1.92034px -0.558831px 0px;\n",conCon.appendChild(settings);var settings_transform=document.createElement("div");settings_transform.innerHTML=`\n    <div style="font-size: 18px; margin-bottom: 10px; text-align: center;">Settings</div>\n    <div id="sProgress" style="font-size: 15px; margin-top: 5px; margin-bottom: 5px;">Progress Counter</div>\n    <div id="kProgress" style="margin-left: 10px; height: 0px; opacity: 0; pointer-events: none;">\n        <div id="Cpetal">Petal: ${coloringValue(petal)}</div>\n        <div id="Caim">Aim: ${coloringValue(obj.aim)}</div>\n        <br>\n        <div id="CMultiple_Toggle">Multiple counting: ${coloringBool(obj.multipleCounting.enable)}</div>\n        <div id="CMultiple_petal">Petals: ${coloringValue(JSON.stringify(obj.multipleCounting.petal,null," ").replaceAll("\n","<br>"))}</div>\n        <div id="CMultiple_key">Key: ${coloringValue(obj.multipleCounting.key)}</div>\n        <div id="CMultiple_view">${coloringFunction("View Progresses")}</div>\n    </div>\n    <div id="sTransform" style="font-size: 15px; margin-top: 5px; margin-bottom: 5px;">Position & Scale</div>\n    <div id="kTransform" style="margin-left: 10px; height: 0px; opacity: 0; pointer-events: none;">\n        <div id="Ctop">top: ${coloringBool(obj.config.top)}</div>\n        <div id="Cleft">left: ${coloringBool(obj.config.left)}</div>\n        <div id="CposX">x: ${coloringValue(obj.config.x)}</div>\n        <div id="CposY">y: ${coloringValue(obj.config.y)}</div>\n        <div id="Cscale">scale: ${coloringValue(obj.config.scale)}</div>\n        <div id="CkeyToggle">Key: ${coloringValue(obj.config.key)}</div>\n    </div>\n    <div id="sFindId" style="font-size: 15px; margin-top: 5px; margin-bottom: 5px;">Find & Apply Basic ID</div>\n    <div id="kFindId" style="margin-left: 10px; height: 0px; opacity: 0; pointer-events: none;">\n        <div id="Cfind">${coloringFunction("Find & Apply")}</div>\n        <div id="Capply">Basic ID: ${coloringValue(obj.basicId)}</div>\n        <div id="CautoFind">Auto Update: ${coloringBool(obj.autoFind)}</div>\n        <div id="Cinstruction">${coloringFunction("How to use?")}</div>\n    </div>\n`,settings.appendChild(settings_transform),["sProgress","sTransform","sFindId"].forEach((e=>{document.getElementById(e).onclick=function(e){e.stopPropagation();var t=document.getElementById("k"+this.id.slice(1));1!=t.style.opacity?(t.style.opacity=1,t.style.height="auto",t.style.pointerEvents="all"):(t.style.opacity=0,t.style.height="0px",t.style.pointerEvents="none")}})),["Cpetal","Caim","CMultiple_Toggle","CMultiple_petal","CMultiple_key","CMultiple_view","Ctop","Cleft","CposX","CposY","Cscale","CkeyToggle","Cfind","Capply","CautoFind","Cinstruction"].forEach((e=>{document.getElementById(e).onclick=function(t){t.stopPropagation();var i="",n=[],o=0,r=[];if(["Cpetal","Caim","CMultiple_Toggle","CMultiple_petal","CMultiple_aim","CMultiple_key","CMultiple_view"].includes(this.id))if(["Cpetal"].includes(this.id)){if(i=prompt("Petal name?",petal),null==petal)return;var a=getNewPetal(petal=i);obj.id=a.id,obj.rarity=a.rarity,petal=a.petal,this.innerHTML=`Petal: ${coloringValue(petal)}`,barText.innerHTML=`${petal}: ${convertNumber(thisPetal)} / ${convertNumber(obj.aim)} (${(100*thisPetal/obj.aim).toFixed(2)}%)`}else if(["Caim"].includes(this.id)){if(null==(i=prompt("Aim?",obj.aim)))return;if(isNaN(i))return alert("Invalid input: [Aim] must be a number!");obj.aim=Number(i),obj.aim=Math.abs(Math.floor(obj.aim)),obj.aim=0==obj.aim?1:obj.aim,this.innerHTML=`Aim: ${coloringValue(obj.aim)}`}else if(["CMultiple_Toggle"].includes(this.id))i=!obj.multipleCounting.enable,this.innerHTML=`Multiple counting: ${coloringBool(i)}`,obj.multipleCounting.enable=i;else if(["CMultiple_petal"].includes(this.id))for(var l=0,s={},p={};;){if(null==(i=prompt(`${l+1}. Petal name: Aim\nClick Cancel to Save & Exit`,`${Object.keys(obj.multipleCounting.petal)[l]}: ${Object.values(obj.multipleCounting.petal)[l]}`))){Object.keys(s).length<2&&(s=obj.multipleCounting.petal),obj.multipleCounting.petal=s;for(const[e,[t,i]]of Object.entries(Object.entries(obj.multipleCounting.petal)))p[e]={id:getNewPetal(t).id,rarity:getNewPetal(t).rarity,aim:i};return this.innerHTML=`Petals: ${coloringValue(JSON.stringify(obj.multipleCounting.petal,null," ").replaceAll("\n","<br>"))}`,void localStorage.setItem("petalFarmingCounter",JSON.stringify(obj))}i=i.split(":").map((e=>e.trim())),isNaN(i[1])?alert("Invalid input: [Aim] must be a number!"):(s[getNewPetal(i[0]).petal]=Number(i[1]),l++)}else if(["CMultiple_key"].includes(this.id)){o=Date.now()+5e3,this.innerHTML='Key: <a class="blink">Press a key!</a>';var d=setInterval((()=>(r.unshift(lastKey),r.length>2&&r.splice(2),r[r.length-1]!=r[0]?(obj.multipleCounting.key=r[0],this.innerHTML=`Key: ${coloringValue(r[0])}`,clearInterval(d),void localStorage.setItem("petalFarmingCounter",JSON.stringify(obj))):Date.now()>o?(this.innerHTML=`Key: ${coloringValue(obj.multipleCounting.key)}`,void clearInterval(d)):void 0)))}else["CMultiple_view"].includes(this.id)&&multiProgressToggle();else if(["Ctop","Cleft","CposX","CposY","Cscale","CkeyToggle"].includes(this.id)){if(["Ctop","Cleft"].includes(this.id))i=!obj.config[e.slice(1)],this.innerHTML=`${e.slice(1)}: ${coloringBool(i)}`,obj.config[e.slice(1)]=i;else if(["CposX","CposY"].includes(this.id)){if(null==(i=prompt(e.slice(1),obj.config[e[e.length-1].toLowerCase()].slice(0,-2))))return;if(isNaN(i))return alert(`Invalid input: [${e.slice(1)}] must be a number!`);i=Number(i),this.innerHTML=`${e[e.length-1].toLowerCase()}: ${coloringValue(i+"px")}`,obj.config[e[e.length-1].toLowerCase()]=i+"px"}else if(["Cscale"].includes(this.id)){if(null==(i=prompt(e.slice(1),obj.config[e.slice(1)])))return;if(isNaN(i))return alert(`Invalid input: [${e.slice(1)}] must be a number!`);if(0==(i=Number(i)))return;this.innerHTML=`${e.slice(1)}: ${coloringValue(i)}`,obj.config[e.slice(1)]=i}else if(["CkeyToggle"].includes(this.id)){o=Date.now()+5e3,this.innerHTML='Key: <a class="blink">Press a key!</a>';var c=setInterval((()=>(r.unshift(lastKey),r.length>2&&r.splice(2),r[r.length-1]!=r[0]?(obj.config.key=r[0],this.innerHTML=`Key: ${coloringValue(r[0])}`,clearInterval(c),void localStorage.setItem("petalFarmingCounter",JSON.stringify(obj))):Date.now()>o?(this.innerHTML=`Key: ${coloringValue(obj.config.key)}`,void clearInterval(c)):void 0)))}containerPos()}else if(["Cfind","Capply","CautoFind","Cinstruction"].includes(this.id))if(["Cfind"].includes(this.id)){var g;i=prompt("Petal?",obj.find.petal),i=stringSimilarity.findBestMatch(i,petalArr),g=i.bestMatch.target,i=i.bestMatchIndex+1,rarityArr.forEach(((e,t)=>{var i=prompt(`Amount of ${e} ${g}`,obj.find.value[t]);null==i&&(i=0),isNaN(i)&&(i=0),n.push(Number(i))})),obj.find.petal=g,obj.find.value=n,obj.basicId=findSequence(n,unsafeWindow.Module.HEAPU32)-8*i+8,document.getElementById("Capply").innerHTML=`Basic ID: ${coloringValue(obj.basicId)}`}else if(["Capply"].includes(this.id)){if(null==(i=prompt("Basic ID?",obj.basicId)))return;if(isNaN(i))return;obj.basicId=Number(i),this.innerHTML=`Basic ID: ${coloringValue(obj.basicId)}`}else["CautoFind"].includes(this.id)?(i=!obj.autoFind,this.innerHTML=`Auto Update: ${coloringBool(i)}`,obj.autoFind=i):["Cinstruction"].includes(this.id)&&window.open("https://youtu.be/W2K6mWIzmHA?si=JWHOLJ67LSntThGW");localStorage.setItem("petalFarmingCounter",JSON.stringify(obj))}}));var changelog=document.createElement("div");changelog.style="\n    padding: 10px;\n    color: white;\n    font-family: 'Ubuntu';\n    z-index: 1;\n    font-size: 12px;\n    line-height: 15px;\n    opacity: 0;\n    transition: all 1s ease-in-out;\n    pointer-events: none;\n    text-shadow: rgb(0 0 0) 2px 0px 0px, rgb(0 0 0) 1.75517px 0.958851px 0px, rgb(0 0 0) 1.0806px 1.68294px 0px, rgb(0 0 0) 0.141474px 1.99499px 0px, rgb(0 0 0) -0.832294px 1.81859px 0px, rgb(0 0 0) -1.60229px 1.19694px 0px, rgb(0 0 0) -1.97998px 0.28224px 0px, rgb(0 0 0) -1.87291px -0.701566px 0px, rgb(0 0 0) -1.30729px -1.5136px 0px, rgb(0 0 0) -0.421592px -1.95506px 0px, rgb(0 0 0) 0.567324px -1.91785px 0px, rgb(0 0 0) 1.41734px -1.41108px 0px, rgb(0 0 0) 1.92034px -0.558831px 0px;\n",changelog.innerHTML=`\n    <div style="font-size: 18px; margin-bottom: 10px; text-align: center;">Hackering UI</div>\n    <div style="color: #1FDBDE; font-size: 15px; margin-top: 5px; margin-bottom: 5px">7/15/24 - v1.3</div>\n    <div style="margin-left: 10px">\n        - Added counting script from Furaken.<br>\n        - Added ${coloringValue("Auto update ID")} (this requires you to use ${coloringValue("Find & Apply")} at least one times).\n    </div>\n    <div style="color: #1FDBDE; font-size: 15px; margin-top: 5px; margin-bottom: 5px">5/15/24 - v1.1</div>\n    <div style="margin-left: 10px">\n        - Updated tracers and removed some detectable features.\n    </div>\n`,conCon.appendChild(changelog);var barText=document.createElement("div");barText.style="\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    position: absolute;\n    width: 100%;\n    color: white;\n    font-family: 'Ubuntu';\n    text-align: center;\n    transition: all 1s ease-in-out;\n    text-wrap: nowrap;\n    z-index: 1;\n    pointer-events: none;\n    font-size: 14px;\n    text-shadow: rgb(0 0 0) 2px 0px 0px, rgb(0 0 0) 1.75517px 0.958851px 0px, rgb(0 0 0) 1.0806px 1.68294px 0px, rgb(0 0 0) 0.141474px 1.99499px 0px, rgb(0 0 0) -0.832294px 1.81859px 0px, rgb(0 0 0) -1.60229px 1.19694px 0px, rgb(0 0 0) -1.97998px 0.28224px 0px, rgb(0 0 0) -1.87291px -0.701566px 0px, rgb(0 0 0) -1.30729px -1.5136px 0px, rgb(0 0 0) -0.421592px -1.95506px 0px, rgb(0 0 0) 0.567324px -1.91785px 0px, rgb(0 0 0) 1.41734px -1.41108px 0px, rgb(0 0 0) 1.92034px -0.558831px 0px;\n",container.appendChild(barText);var thisPetal,thisWidth,thisAim,thisPetalObj_,lastKey,barProgress=document.createElement("div");function updateProgress(){if(obj.multipleCounting.enable){thisPetal=0,thisAim=0,thisPetalObj_={};for(const[e,[t,i]]of Object.entries(Object.entries(obj.multipleCounting.petal)))thisPetalObj_[e]={id:getNewPetal(t).id,rarity:getNewPetal(t).rarity,aim:i};for(const[e,[t,i]]of Object.entries(Object.entries(thisPetalObj_)))thisPetal+=Number(unsafeWindow.Module.HEAPU32[obj.basicId+8*i.id-(8-i.rarity)]),thisAim+=Number(i.aim)}else thisPetal=unsafeWindow.Module.HEAPU32[obj.basicId+8*obj.id-(8-obj.rarity)],thisAim=obj.aim;thisWidth=container.style.width.slice(0,-2)*thisPetal/thisAim,barProgress.style.height=thisWidth+"px",barProgress.style.width=thisWidth+"px",barProgress.style.opacity=thisPetal/(.08*thisAim),obj.multipleCounting.enable?barText.innerHTML=`${Object.keys(obj.multipleCounting.petal).length} petals: ${convertNumber(thisPetal)} / ${convertNumber(thisAim)} (${(100*thisPetal/thisAim).toFixed(2)}%)`:barText.innerHTML=`${petal}: ${convertNumber(thisPetal)} / ${convertNumber(thisAim)} (${(100*thisPetal/thisAim).toFixed(2)}%)`}barProgress.style="\n    background: #F5FF65;\n    border-radius: 24px;\n    width: 0px;\n    max-width: 350px;\n    max-height: 24px;\n    transition: all 1s ease-in-out;\n    opacity: 0;\n    height: 0px;\n    top: 50%;\n    position: absolute;\n    transform: translate(0px, -50%);\n",container.appendChild(barProgress),barText.innerHTML=`${petal}: 0 / ${convertNumber(obj.aim)} (0.00%)`,setInterval((()=>{"hidden"==conCon.style.overflow&&(updateProgress(),updateMultiProgress())}),1e4),document.documentElement.addEventListener("keydown",(function(e){lastKey=e.code,event.code==obj.config.key&&("0"==container.style.opacity?(container.style.opacity=1,container.style.pointerEvents="all",settings.style.pointerEvents="all",changelog.style.pointerEvents="all"):(container.style.opacity=0,container.style.pointerEvents="none",settings.style.pointerEvents="none",changelog.style.pointerEvents="none")),event.code==obj.multipleCounting.key&&multiProgressToggle()})),document.querySelector("canvas").onclick=function(){container.style.height="20px",container.style.width="300px",conCon.style.overflow="hidden",container.style.borderRadius="20px",barProgress.style.maxHeight="20px",barProgress.style.maxWidth="300px",barProgress.style.height="20px",barProgress.style.width="300px",barProgress.style.borderRadius="20px",barProgress.style.opacity=1,barProgress.style.background="#F5FF65",barProgress.style.pointerEvents="all",barText.style.opacity=1,settings.style.pointerEvents="none",settings.style.opacity=0,changelog.style.pointerEvents="none",changelog.style.opacity=0,updateProgress(),updateMultiProgress()},GM_addStyle("\n@keyframes blink {\n    0% {color: #DBD74B}\n    50% {color: #1FDBDE}\n    100% {color: #DBD74B}\n}\n\n.blink {\n    animation-name: blink;\n    animation-duration: 1.5s;\n    animation-iteration-count: infinite;\n}\n\n::-webkit-scrollbar {\n    width: 5px;\n}\n::-webkit-scrollbar-track {\n    background: #00000000;\n}\n::-webkit-scrollbar-thumb {\n    background: #444;\n    border-radius: 5px;\n}\n::-webkit-scrollbar-thumb:hover {\n    background: #444;\n}\n");